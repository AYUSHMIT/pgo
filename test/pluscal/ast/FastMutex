------ MODULE AST -------
EXTENDS TLC
fairness == ""
 
ast == 
[type    |-> "multiprocess", 
 name  |-> "FastMutex", 
 decls |-> <<[var |-> "x", eqOrIn |-> "=", val |-> << "defaultInitValue" >>], 
             [var |-> "y", eqOrIn |-> "=", val |-> << "0" >>], 
             [var |-> "b", eqOrIn |-> "=", val |-> << "[", "i", "\\in", "1", "..", "N", "|->", "FALSE", "]" >>]>>,
 defs  |-> <<  >>,
 prcds |-> <<>>,
 procs |-> <<[name   |-> "Proc",
              fairness |-> "unfair", minusLabels |-> <<>>, plusLabels |-><<>>, proceduresCalled |-><<>>,
              eqOrIn |-> "\\in",
              id     |-> << "1", "..", "N" >>,
              decls  |-> <<[var |-> "j", eqOrIn |-> "=", val |-> << "defaultInitValue" >>]>>,
              body   |-> <<[label |-> "ncs",
                            stmts |-> <<[type    |-> "while", 
                                         test    |-> << "TRUE" >>,
                                         labDo   |-> <<[label |-> "start",
                                                        stmts |-> <<[type |-> "assignment",
                                                                     ass  |-> <<[lhs |-> [var |-> "b", sub |-> << "[", "self", "]" >>],
                                                                                 rhs |-> << "TRUE" >>]>>]>>], 
                                                       [label |-> "s01",
                                                        stmts |-> <<[type |-> "assignment",
                                                                     ass  |-> <<[lhs |-> [var |-> "x", sub |-> <<  >>],
                                                                                 rhs |-> << "self" >>]>>]>>], 
                                                       [label |-> "s02",
                                                        stmts |-> <<[type      |-> "labelIf",
                                                                     test      |-> << "y", "#", "0" >>,
                                                                     unlabThen |-> <<>>,
                                                                     labThen   |-> <<[label |-> "s03",
                                                                                      stmts |-> <<[type |-> "assignment",
                                                                                                   ass  |-> <<[lhs |-> [var |-> "b", sub |-> << "[", "self", "]" >>],
                                                                                                               rhs |-> << "FALSE" >>]>>]>>], 
                                                                                     [label |-> "s04",
                                                                                      stmts |-> <<[type |-> "when", 
                                                                                                   exp |-> << "y", "=", "0" >>], 
                                                                                                  [type |-> "goto",  to |-> "start"]>>]>>,
                                                                     unlabElse |-> <<>>,
                                                                     labElse   |-> <<>>]
                                                                    >>], 
                                                       [label |-> "s05",
                                                        stmts |-> <<[type |-> "assignment",
                                                                     ass  |-> <<[lhs |-> [var |-> "y", sub |-> <<  >>],
                                                                                 rhs |-> << "self" >>]>>]>>], 
                                                       [label |-> "s06",
                                                        stmts |-> <<[type      |-> "labelIf",
                                                                     test      |-> << "x", "#", "self" >>,
                                                                     unlabThen |-> <<>>,
                                                                     labThen   |-> <<[label |-> "s07",
                                                                                      stmts |-> <<[type |-> "assignment",
                                                                                                   ass  |-> <<[lhs |-> [var |-> "b", sub |-> << "[", "self", "]" >>],
                                                                                                               rhs |-> << "FALSE" >>]>>], 
                                                                                                  [type |-> "assignment",
                                                                                                   ass  |-> <<[lhs |-> [var |-> "j", sub |-> <<  >>],
                                                                                                               rhs |-> << "1" >>]>>]>>], 
                                                                                     [label |-> "s08",
                                                                                      stmts |-> <<[type    |-> "while", 
                                                                                                   test    |-> << "j", "<=", "N" >>,
                                                                                                   labDo   |-> <<>>,
                                                                                                   unlabDo |-> <<[type |-> "when", 
                                                                                                                  exp |-> << "~", "b", "[", "j", "]" >>], 
                                                                                                                 [type |-> "assignment",
                                                                                                                  ass  |-> <<[lhs |-> [var |-> "j", sub |-> <<  >>],
                                                                                                                              rhs |-> << "j", "+", "1" >>]>>]>>]>>], 
                                                                                     [label |-> "s09",
                                                                                      stmts |-> <<[type      |-> "labelIf",
                                                                                                   test      |-> << "y", "#", "self" >>,
                                                                                                   unlabThen |-> <<>>,
                                                                                                   labThen   |-> <<[label |-> "s10",
                                                                                                                    stmts |-> <<[type |-> "when", 
                                                                                                                                 exp |-> << "y", "=", "0" >>], 
                                                                                                                                [type |-> "goto",  to |-> "start"]>>]>>,
                                                                                                   unlabElse |-> <<>>,
                                                                                                   labElse   |-> <<>>]
                                                                                                  >>]>>,
                                                                     unlabElse |-> <<>>,
                                                                     labElse   |-> <<>>]
                                                                    >>], 
                                                       [label |-> "cs",
                                                        stmts |-> <<[type |-> "assert", 
                                                                     exp |-> << "\\A", "idx", "\\in", "1", "..", "N", ":", "(", "idx", "#", "self", ")", "=>", "(", "pc", "[", "idx", "]", "#", "\"", "cs", "\"", ")" >>]>>], 
                                                       [label |-> "s11",
                                                        stmts |-> <<[type |-> "assignment",
                                                                     ass  |-> <<[lhs |-> [var |-> "y", sub |-> <<  >>],
                                                                                 rhs |-> << "0" >>]>>]>>], 
                                                       [label |-> "s12",
                                                        stmts |-> <<[type |-> "assignment",
                                                                     ass  |-> <<[lhs |-> [var |-> "b", sub |-> << "[", "self", "]" >>],
                                                                                 rhs |-> << "FALSE" >>]>>]>>]>>,
                                         unlabDo |-> <<[type |-> "skip"]>>]>>]>>]>>]
==========================
